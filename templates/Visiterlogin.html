<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Visitor Login - PixelPast Museum</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='loginregister.css') }}">
</head>

<body>
  <div class="auth-container">
    <div class="tabs">
      <button class="tab active" onclick="showTab('login')">Login</button>
      <button class="tab" onclick="showTab('register')">Register</button>
    </div>

    <!-- Login Form -->
    <div id="login" class="form active">
      <h2>Visitor Login</h2>
      <!-- Display flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      <form method="POST">
        <input type="text" name="username" placeholder="Username" required />
        <input type="password" name="password" placeholder="Password" required />
        <button type="submit">Login</button>
      </form>
    </div>

    <!-- Register Form -->
    <div id="register" class="form">
      <h2>Visitor Registration</h2>
      <form method="POST" action="{{ url_for('visitor_register') }}">
        <input type="text" name="username" placeholder="Username" required />
        <input type="email" name="email" placeholder="Email" required />
        <input type="password" name="password" placeholder="Password" required />
        <button type="submit">Register</button>
      </form>
    </div>
  </div>

  <script>
    function showTab(tabId) {
      document.querySelectorAll(".form").forEach(f => f.classList.remove("active"));
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      if (tabId === "login") {
        document.querySelector(".tab:nth-child(1)").classList.add("active");
      } else if (tabId === "register") {
        document.querySelector(".tab:nth-child(2)").classList.add("active");
      }
    }
  </script>
</body>

</html>